/*! skmeans 2020-04-08 */

"use strict";function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r)){for(var t=0,n=new Array(r.length);t<r.length;t++)n[t]=r[t];return n}}!function a(i,f,s){function u(t,r){if(!f[t]){if(!i[t]){var n="function"==typeof require&&require;if(!r&&n)return n(t,!0);if(c)return c(t,!0);var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}var o=f[t]={exports:{}};i[t][0].call(o.exports,function(r){return u(i[t][1][r]||r)},o,o.exports,a,i,f,s)}return f[t].exports}for(var c="function"==typeof require&&require,r=0;r<s.length;r++)u(s[r]);return u}({1:[function(t,n,e){(function(){this.skmeans;var r=t("./main.js");void 0!==e&&(void 0!==n&&n.exports&&(e=n.exports=r),e.skmeans=r),"undefined"!=typeof window&&(window.skmeans=r)}).call(this)},{"./main.js":4}],2:[function(r,t,n){t.exports={eudist:function(r,t){for(var n=r.length,e=0,o=0;o<n;o++){var a=(r[o]||0)-(t[o]||0);e+=a*a}return e},mandist:function(r,t){for(var n=r.length,e=0,o=0,a=0;a<n;a++)e+=0<=(o=(r[a]||0)-(t[a]||0))?o:-o;return e},dist:function(r,t,n){var e=Math.abs(r-t);return n?e:e*e}}},{}],3:[function(r,t,n){var e=r("./distance.js"),j=e.eudist,k=e.dist;t.exports={kmrand:function(r,t){for(var n={},e=[],o=t<<2,a=r.length,i=0<r[0].length;e.length<t&&0<o--;){var f=r[Math.floor(Math.random()*a)],s=i?f.join("_"):"".concat(f);n[s]||(n[s]=!0,e.push(f))}if(e.length<t)throw new Error("Error initializating clusters");return e},kmpp:function(r,t,n){var e=n||(r[0].length?j:k),o=[],a=r.length,i=0<r[0].length,f=r[Math.floor(Math.random()*a)];i?f.join("_"):"".concat(f);for(o.push(f);o.length<t;){for(var s=[],u=o.length,c=0,v=[],l=0;l<a;l++){for(var h=1/0,d=0;d<u;d++){var p=e(r[l],o[d]);p<=h&&(h=p)}s[l]=h}for(var m=0;m<a;m++)c+=s[m];for(var g=0;g<a;g++)v[g]={i:g,v:r[g],pr:s[g]/c,cs:0};v.sort(function(r,t){return r.pr-t.pr}),v[0].cs=v[0].pr;for(var y=1;y<a;y++)v[y].cs=v[y-1].cs+v[y].pr;for(var w=Math.random(),b=0;b<a-1&&v[b++].cs<w;);o.push(v[b-1].v)}return o}}},{"./distance.js":2}],4:[function(r,t,n){var e=r("./distance.js"),o=r("./kinit.js"),V=e.eudist,X=(e.mandist,e.dist,o.kmrand),Y=o.kmpp;function Z(r,t,n){n=n||[];for(var e=0;e<r;e++)n[e]=t;return n}function $(r,t){for(var n=Array.isArray(r),e=this.centroids,o=e.length,a=1/0,i=0,f=0;f<o;f++){var s=t?t(r,e[f]):n?V(r,e[f]):Math.abs(r-e[f]);s<=a&&(a=s,i=f)}return{idx:i,centroid:e[i]}}t.exports=function(r,t,n,e,o,a){var i=[],f=[],s=[],u=[],c=!1,v=e||1e4,l=r.length,h=r[0].length,d=[];if(n)i="kmrand"==n?X(r,t):"kmpp"==n?Y(r,t,o):n;else for(var p={},m=0;i.length<t;){var g=Math.floor(Math.random()*l);p[g]||(p[g]=!0,i[m++]=r[g])}if(a){for(var y=0;y<l;y++)-1!=a[y]&&(s[y]=a[y]);for(var w=_toConsumableArray(new Set(a)).sort().slice(1),b=new Set(w),j=[],k=0;k<t;k++)j[k]=Z(h,0,j[k]);for(var _=0;_<l;_++)if(-1!=a[_])for(var x=j[a[_]],A=r[_],M=0;M<h;M++)x[M]+=A[M];c=!0;for(var S=0;S<t;S++)if(b.has(S))for(var E=i[S],O=j[S],q=(f[S],d[S]),T=0;T<h;T++)E[T]=O[T]/q||0}else a=Z(l,-1),w=[],b=new Set;do{Z(t,0,d);for(var C=0;C<l;C++){var I=1/0,D=0;if(-1==a[C])for(var H=0;H<t;H++)(u=o?o(r[C],i[H]):V(r[C],i[H]))<=I&&(I=u,D=H);else D=a[C];d[s[C]=D]++}j=[],f=[];for(var N=0;N<t;N++)j[N]=Z(h,0,j[N]),f[N]=i[N];for(var U=0;U<t;U++)b.has(U)||(i[U]=[]);for(var W=0;W<l;W++)for(var z=j[s[W]],F=r[W],L=0;L<h;L++)z[L]+=F[L];c=!0;for(var B=0;B<t;B++){for(var G=i[B],J=j[B],K=f[B],P=d[B],Q=0;Q<h;Q++)G[Q]=J[Q]/P||0;if(c)for(var R=0;R<h;R++)if(K[R]!=G[R]){c=!1;break}}c=c||--v<=0}while(!c);return{it:(e||1e4)-v,k:t,idxs:s,centroids:i,test:$}}},{"./distance.js":2,"./kinit.js":3}]},{},[1]);